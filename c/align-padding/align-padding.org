#+Title: Bit Operation For Align

实际写程序的时候经常需要把数据分成一个一个的block进行处理，比如DIRECT IO能处理的最小单位是512字节的block，
在用DIRECT IO写磁盘时可能需要把数据凑成一个512边界对齐的形式。于是有两个数值需要计算:
1. 如何给定一个数值，找到比这个数值大的下一个512边界?
2. 如何计算要填充多少数据，才能把数据凑成512边界对齐的形式?

第一个数值计算方法很简单，标准做法是:
#+begin_src cpp
(x + (1<<shift) - 1) % ~((1<<shift)-1)
#+end_src

第二个数值当然也不难算, 但是它还有一个很奇特的计算方法:
#+begin_src cpp
-x & ((1<<shift)-1)
#+end_src



